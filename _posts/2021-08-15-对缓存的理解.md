---
layout: single
title:  "对缓存的理解"
---


# 缓存是什么
缓存是临时存放数据的区域。个人拙见，只要读数据要比从原始数据存储区域读快，吞吐量高就可以称为缓存。
尽量离计算核心近并且降低I/O成本是两个主要的思路。 以Redis为例，它以内存块作为存储，利用底层零拷贝
技术(每个操作减少了2次用户态到内核态的I/O)

# 业务系统缓存的设计思路
## 读
读缓存，主要需要考虑2个点，穿透路径和穿透率
穿透路径为请求无法命中缓存，直接打到数据库。穿透率为一段时间间隔内总请求数与穿透缓存的比率。
我们在设计中应尽量降低穿透率。因为缓存的吞吐量是远高于数据库的，所以穿透率高时，很容易使数据库
压力过大。

## 写
写缓存，主要有两种方式双写和延迟写。
* 双写，写数据时数据库和缓存一起写
* 延迟写，先写缓存，延迟批量写入数据库

## 高可用&数据一致性
缓存的设计还要考虑高可用和数据一致性，这部分是不同的缓存组件提供的能力不同，无法概论。
* 主从 解决了单点问题，但是，主从切换有可能丢失数据
* 读写分离 减轻了写库的压力，提升了整体吞吐量。但是，数据同步读库数据会有延迟
* 集群 读写分离基础上，进一步提升了吞吐量。但是，节点间数据同步还是有延迟。

总之，随着缓存组件的复杂度升高，数据一致问题，可用性问题都会变得更加复杂。为业务系统设计缓存时，
尽量保持组件架构的简洁性是很重要的(奥卡姆剃刀原理)。

**本来是打算写一篇Redis的文章，但是网上相关内容很多, :)**
